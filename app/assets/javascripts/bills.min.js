(function(){function s(e,t,n,s){function N(e){$("#voteBD .legend li").each(function(){$(this).attr("data-depth")!=e?$(this).hide().removeClass("currentDepth"):$(this).fadeIn(250).addClass("currentDepth")});e==1?r.svg.datum(u[t]).selectAll("path").data(r.partition.nodes).transition().duration(250).attr("d",r.arc):r.svg.datum(u[t]).selectAll("path").data(r.partition.nodes).transition().duration(250).attr("d",r.arc2)}function C(){return parseInt($("#voteBD .legend li.currentDepth").attr("data-depth"))}function k(e){$("#voteBD .voteBD-center li").removeClass("currentCenter").hide();$("#voteBD .voteBD-center li:eq("+e+")").addClass("currentCenter").fadeIn(250)}function L(){return parseInt($("#voteBD .voteBD-center li.currentCenter").index())}function A(e){e==1?i.find(".d3Tooltip").html("").removeClass("taller").append($("<ul>").attr("class","tooltipSplit").append($("<li>").append($("<span>").attr("class","title").text(h)).append($("<span>").attr("class","amount").text(d+"%")).append($("<span>").attr("class","subAmount").text(m+" votes"))).append($("<li>").append($("<span>").attr("class","title").text(p)).append($("<span>").attr("class","amount").text(v+"%")).append($("<span>").attr("class","subAmount").text(g+" votes")))):i.find(".d3Tooltip").html("").addClass("taller").append($("<ul>").attr("class","tooltipSplit").append($("<li>").append($("<span>").attr("class","title").text(h)).append($("<ul>").attr("class","legend").append($("<li>").append($("<span>").attr("class","square").css("background",r.color(2))).append($("<span>").attr("class","title").text(y+"%"))).append($("<li>").append($("<span>").attr("class","square").css("background",r.color(3))).append($("<span>").attr("class","title").text(b+"%"))).append($("<li>").append($("<span>").attr("class","square").css("background",r.color(4))).append($("<span>").attr("class","title").text(w+"%"))))).append($("<li>").append($("<span>").attr("class","title").text(p)).append($("<ul>").attr("class","legend").append($("<li>").append($("<span>").attr("class","square").css("background",r.color(2))).append($("<span>").attr("class","title").text(E+"%"))).append($("<li>").append($("<span>").attr("class","square").css("background",r.color(3))).append($("<span>").attr("class","title").text(S+"%"))).append($("<li>").append($("<span>").attr("class","square").css("background",r.color(4))).append($("<span>").attr("class","title").text(x+"%"))))))}var u=JSON.parse(JSON.stringify(e)),a=u[t].children[0].children[0].size+u[t].children[0].children[1].size+u[t].children[0].children[2].size,c=u[t].children[1].children[0].size+u[t].children[1].children[1].size+u[t].children[1].children[2].size;if(a>c)var h="yeas",p="nays",d=parseInt(a/(a+c+n+s)*100),v=parseInt(c/(a+c+n+s)*100),m=a,g=c,y=parseInt(u[t].children[0].children[0].size/a*100),b=parseInt(u[t].children[0].children[1].size/a*100),w=parseInt(u[t].children[0].children[2].size/a*100),E=parseInt(u[t].children[1].children[0].size/c*100),S=parseInt(u[t].children[1].children[1].size/c*100),x=parseInt(u[t].children[1].children[2].size/c*100);else if(a<c)var h="nays",p="yeas",d=parseInt(c/(a+c+n+s)*100),v=parseInt(a/(a+c+n+s)*100),m=c,g=a,y=parseInt(u[t].children[1].children[0].size/c*100),b=parseInt(u[t].children[1].children[1].size/c*100),w=parseInt(u[t].children[1].children[2].size/c*100),E=parseInt(u[t].children[0].children[0].size/a*100),S=parseInt(u[t].children[0].children[1].size/a*100),x=parseInt(u[t].children[0].children[2].size/a*100);else var h="draw",p="draw",d,m=50,v,g=50,y=parseInt(u[t].children[0].children[0].size/a*100),b=parseInt(u[t].children[0].children[1].size/a*100),w=parseInt(u[t].children[0].children[2].size/a*100),E=parseInt(u[t].children[1].children[0].size/c*100),S=parseInt(u[t].children[1].children[1].size/c*100),x=parseInt(u[t].children[1].children[2].size/c*100);i.find("h4").after($("<ul>").attr("class","legend top").append($("<li>").attr("data-depth",1).append($("<span>").attr("class","square").css("background",r.color(0))).append($("<span>").attr("class","title").text(h))).append($("<li>").attr("data-depth",1).append($("<span>").attr("class","square").css("background",r.color(1))).append($("<span>").attr("class","title").text(p))).append($("<li>").attr("data-depth",2).append($("<span>").attr("class","square").css("background",r.color(2))).append($("<span>").attr("class","title").text("Democrat"))).append($("<li>").attr("data-depth",2).append($("<span>").attr("class","square").css("background",r.color(3))).append($("<span>").attr("class","title").text("Republican"))).append($("<li>").attr("data-depth",2).append($("<span>").attr("class","square").css("background",r.color(4))).append($("<span>").attr("class","title").text("Independent"))));i.find(".legend").after($("<ul>").attr("class","voteBD-center interactive").append($("<li>").append($("<span>").attr("class","title").text(h)).append($("<span>").attr("class","amount").text(d+"%"))).append($("<li>").append($("<span>").attr("class","title").text(p)).append($("<span>").attr("class","amount").text(v+"%"))));i.find("svg").before($("<div>").attr("class","d3Tooltip"));var T=r.svg.datum(u[t]).selectAll("path").data(r.partition.nodes).enter().append("path").attr("d",r.arc).attr("class","interactive").attr("data-depth",function(e){return e.depth}).style("fill",function(e){return e.depth==0?"#fafafa":e.depth==1?e.name==h?r.color(0):r.color(1):e.name=="D"?r.color(2):e.name=="R"?r.color(3):r.color(4)}).each(o);i.fadeIn(500);N(1);k(0);f();l();i.find("path").on("click",function(){if($(this).attr("data-depth")==0)L()==1?k(0):k(1);else if(C()==1){N(2);A(2)}else{N(1);A(1)}}).on("mouseover",function(){$(this).attr("data-depth")!=0&&i.find(".d3Tooltip").show()}).on("mouseout",function(){i.find(".d3Tooltip").hide()}).on("mousemove",throttle(function(e){A(C());var t=e.pageX-i.offset().left,n=e.pageY-i.offset().top;i.find(".d3Tooltip").css("left",t+10).css("top",n+10)},10));i.find(".voteBD-center").on("click",function(){i.find("path:first-of-type").trigger("click")})}function o(e){e.x0=e.x;e.dx0=e.dx}function u(e){var t=d3.interpolate({x:e.x0,dx:e.dx0},e);return function(n){var i=t(n);e.x0=i.x;e.dx0=i.dx;return r.arc(i)}}function a(e,t){r.svg.datum(e[t]).selectAll("path").data(r.partition.nodes).transition().duration(1500).attrTween("d",u).each(o)}function f(){var e=i.find("svg g:first-of-type"),t=e[0].getBoundingClientRect().height,n=e[0].getBoundingClientRect().width,r=i.find(".voteBD-center"),s=r.height(),o=r.width();r.css("margin-top",t/2-s/2-12).css("margin-left",n/2-o/2-3)}function l(){var e=i.find("svg"),t=e.width();e.height(t+20)}function c(){var e=b("each","name").split(","),t="";$.each(e,function(n,r){t+="<option>"+e[n]+"</option>"});return t}function d(t){function i(t){p.find(".d3Tooltip").fadeOut(250);var n,r,i;if(t&&h.centered!==t){var s=h.path.centroid(t);n=s[0]-40;r=s[1];i=3;h.centered=t;a(e,t.id);var o=b(t.id,"name");$('input[name="filterPoliticians"]').val(o);y(o)}else{n=147;r=h.height/2;i=1;h.centered=null;a(e,"total");$('input[name="filterPoliticians"]').val("");y("")}h.g.selectAll("path").classed("active",h.centered&&function(e){return e===h.centered});h.g.transition().duration(500).attr("transform","translate("+h.width/2+","+h.height/2+") scale("+i+") translate("+ -n+","+ -r+")");v();p.find(".d3Tooltip").fadeIn(250)}function s(e){var i=b(e,"name");if(t[n][e]==undefined)var s=0;else var s=t[n][e];if(t[r][e]==undefined)var o=0;else var o=t[r][e];var u=parseInt(s/(s+o)*100),a=parseInt(o/(s+o)*100);p.find(".d3Tooltip").html("").addClass("taller").append($("<h5>").text(i)).append($("<ul>").attr("class","tooltipSplit").append($("<li>").append($("<span>").attr("class","title").text(n)).append($("<span>").attr("class","amount").text(u+"%")).append($("<span>").attr("class","subAmount").text(s+" votes"))).append($("<li>").append($("<span>").attr("class","title").text(r)).append($("<span>").attr("class","amount").text(a+"%")).append($("<span>").attr("class","subAmount").text(o+" votes"))))}if(t.yeasTotal>t.naysTotal)var n="yeas",r="nays";else if(t.yeasTotal<t.naysTotal)var n="nays",r="yeas";else var n="draw",r="draw";t.chamber=="Senate"?d3.json("assets/us.json",function(e,o){h.g.append("g").selectAll("path").data(topojson.feature(o,o.objects.states).features).enter().append("path").attr("d",h.path).attr("fill",function(e){return t[n][e.id]==0||t[n][e.id]==undefined?h.color(1):t[n][e.id]==1?h.color(2):h.color(0)}).style("stroke-width","1px").style("stroke","#fafafa").attr("class","interactive").on("mouseover",function(e){s(e.id)}).on("click",i);p.find("path").on("mouseover",function(){p.find(".d3Tooltip").show()}).on("mouseout",function(){p.find(".d3Tooltip").hide()}).on("mousemove",throttle(function(e){var t=e.pageX-p.offset().left,n=e.pageY-p.offset().top;p.find(".d3Tooltip").css("left",t+10).css("top",n+10)},10));p.find("h4").after($("<ul>").attr("class","legend top").append($("<li>").append($("<span>").attr("class","square").css("background",h.color(0))).append($("<span>").attr("class","title").text(n))).append($("<li>").append($("<span>").attr("class","square").css("background",h.color(1))).append($("<span>").attr("class","title").text(r))))}):d3.json("assets/us-113.json",function(e,t){h.g.append("g").selectAll("path").data(topojson.feature(t,t.objects.districts).features).enter().append("path").attr("d",h.path).attr("fill",function(e){return h.color(1)}).style("stroke-width","1px").style("stroke","#fafafa").on("click",i)});p.find("svg").before($("<div>").attr("class","d3Tooltip"));p.fadeIn(500)}function v(){var e=p.find("svg"),t=i.find("svg").width();e.height(t+20)}function g(e,t){function n(t){var n;e.yeaTotal>e.nayTotal?n="Yeas":e.yeaTotal<e.nayTotal?n="Nays":n="Draw";return t==n?t+'<span aria-hidden="true" class="icon-trophy"></span>':t}function r(n){var r=$("<div>");if(e[n]!=undefined)if(t=="list"){r.append($("<table>").append($("<thead>").append($("<tr>").append($("<th>").attr("width",60).attr("data-sort","string").text("Party")).append($("<th>").attr("width",60).attr("data-sort","string").text("State")).append($("<th>").attr("data-sort","string").text("Name")))).append($("<tbody>")));$.each(e[n],function(e,t){r.find("tbody").append($("<tr>").attr("data-party",this.party).attr("data-partylong",s(this.party)).attr("data-state",this.state).attr("data-statelong",b(this.state,"name")).attr("data-name",this.firstName+" "+this.lastName).append($("<td>").append($("<span>").css("background",i(this.party)).text(this.party))).append($("<td>").text(this.state)).append($("<td>").append($("<a>").attr("href","/politicians/"+this.firstName.toLowerCase().replace(/\s+/g,"").replace(/"(.*?)"/ig,"")+"-"+this.lastName.toLowerCase().replace(/\s+/g,"").replace(/"(.*?)"/ig,"")+"/"+this._id).text(this.firstName+" "+this.lastName))))})}else{r.append($("<ul>"));$.each(e[n],function(e,t){r.find("ul").append($("<li>").attr("data-party",this.party).attr("data-partylong",s(this.party)).attr("data-state",this.state).attr("data-statelong",b(this.state,"name")).attr("data-name",this.firstName+" "+this.lastName).css("background-image","url(/assets/pictures/congress-113/"+this._id+".jpg)").append($("<a>").attr("href","/politicians/"+this.firstName.toLowerCase().replace(/\s+/g,"").replace(/"(.*?)"/ig,"")+"-"+this.lastName.toLowerCase().replace(/\s+/g,"").replace(/"(.*?)"/ig,"")+"/"+this._id).append($("<span>").css("background",i(this.party)))))})}else n=="yeas"?r.append($("<p>").attr("class","aligncenter").text("No members voted yea")):n=="nays"?r.append($("<p>").attr("class","aligncenter").text("No members voted nay")):n=="notVoting"?r.append($("<p>").attr("class","aligncenter").text("All members voted")):r.append($("<p>").attr("class","aligncenter").text("All members were present"));return r}function i(e){return e=="D"?"#61D2D6":e=="R"?"#EA3556":"#888888"}function s(e){return e=="D"?"Democrat":e=="R"?"Republican":"Independent"}function o(e,t,n){m.find(".d3Tooltip").html("").append($("<h5>").text(e).append($("<p>").text(n+" - "+t)))}$(".poliViewColumn").remove();m.append($("<div>").attr("class","row").append($("<div>").attr("class","large-4 columns").append($("<div>").attr("class","poliViewColumn").append($("<div>").append($("<h5>").html(n("Yeas"))).append($("<p>").text(e.yeaTotal+" votes"))).append(r("yeas")))).append($("<div>").attr("class","large-4 columns").append($("<div>").attr("class","poliViewColumn").append($("<div>").append($("<h5>").html(n("Nays"))).append($("<p>").text(e.nayTotal+" votes"))).append(r("nays")))).append($("<div>").attr("class","large-4 columns").append($("<div>").attr("class","poliViewColumn").append($("<div>").append($("<h5>").text("Didn't Vote")).append($("<p>").text(e.notVotingTotal+" members"))).append(r("notVoting"))).append($("<div>").attr("class","poliViewColumn").append($("<div>").append($("<h5>").text("Absent")).append($("<p>").text(e.presentTotal+" members"))).append(r("present")))));m.find("table").stupidtable().find("th:eq(1)").trigger("click");$(document).on("keyup",'input[name="filterPoliticians"]',function(){y($(this).val())}).on("keypress",'input[name="filterPoliticians"]',function(e){e.which==13&&e.preventDefault()});m.find(".poliViewColumn li").on("mouseover",function(){m.find(".d3Tooltip").show()}).on("mouseout",function(){m.find(".d3Tooltip").hide()}).on("mousemove",throttle(function(e){var t=e.pageX-m.offset().left,n=e.pageY-m.offset().top;m.find(".d3Tooltip").css("left",t+10).css("top",n+10)},10)).on("mouseenter",function(){o($(this).attr("data-name"),$(this).attr("data-statelong"),$(this).attr("data-party"))});m.fadeIn(500)}function y(e){e=e.toLowerCase();$(".poliViewColumn tbody tr, .poliViewColumn li").each(function(){$(this).attr("data-partylong").toLowerCase().indexOf(e)==-1&&$(this).attr("data-state").toLowerCase().indexOf(e)==-1&&$(this).attr("data-statelong").toLowerCase().indexOf(e)==-1&&$(this).attr("data-name").toLowerCase().indexOf(e)==-1?$(this).addClass("hide"):$(this).removeClass("hide")});$(".poliViewColumn tbody, .poliViewColumn ul").each(function(){var e=$(this).children().not(".hide").length,t=$(this).parents(".poliViewColumn").find("div:first-of-type p"),n=t.text().substr(t.text().indexOf(" "));t.text(e+n)})}function b(e,t){var n=new Array({name:"Alabama",abbrev:"AL"},{name:"Alaska",abbrev:"AK"},{name:"Arizona",abbrev:"AZ"},{name:"Arkansas",abbrev:"AR"},{name:"California",abbrev:"CA"},{name:"Colorado",abbrev:"CO"},{name:"Connecticut",abbrev:"CT"},{name:"Delaware",abbrev:"DE"},{name:"Florida",abbrev:"FL"},{name:"Georgia",abbrev:"GA"},{name:"Hawaii",abbrev:"HI"},{name:"Idaho",abbrev:"ID"},{name:"Illinois",abbrev:"IL"},{name:"Indiana",abbrev:"IN"},{name:"Iowa",abbrev:"IA"},{name:"Kansas",abbrev:"KS"},{name:"Kentucky",abbrev:"KY"},{name:"Louisiana",abbrev:"LA"},{name:"Maine",abbrev:"ME"},{name:"Maryland",abbrev:"MD"},{name:"Massachusetts",abbrev:"MA"},{name:"Michigan",abbrev:"MI"},{name:"Minnesota",abbrev:"MN"},{name:"Mississippi",abbrev:"MS"},{name:"Missouri",abbrev:"MO"},{name:"Montana",abbrev:"MT"},{name:"Nebraska",abbrev:"NE"},{name:"Nevada",abbrev:"NV"},{name:"New Hampshire",abbrev:"NH"},{name:"New Jersey",abbrev:"NJ"},{name:"New Mexico",abbrev:"NM"},{name:"New York",abbrev:"NY"},{name:"North Carolina",abbrev:"NC"},{name:"North Dakota",abbrev:"ND"},{name:"Ohio",abbrev:"OH"},{name:"Oklahoma",abbrev:"OK"},{name:"Oregon",abbrev:"OR"},{name:"Pennsylvania",abbrev:"PA"},{name:"Rhode Island",abbrev:"RI"},{name:"South Carolina",abbrev:"SC"},{name:"South Dakota",abbrev:"SD"},{name:"Tennessee",abbrev:"TN"},{name:"Texas",abbrev:"TX"},{name:"Utah",abbrev:"UT"},{name:"Vermont",abbrev:"VT"},{name:"Virginia",abbrev:"VA"},{name:"Washington",abbrev:"WA"},{name:"West Virginia",abbrev:"WV"},{name:"Wisconsin",abbrev:"WI"},{name:"Wyoming",abbrev:"WY"}),r="";$.each(n,function(n,i){if(e=="each")t=="name"?r+=","+i.name:t=="abbrev"&&(r+=","+i.abbrev.toUpperCase());else if(t=="name"){if(i.abbrev.toLowerCase()==e.toLowerCase()){r=i.name;return!1}}else if(t=="abbrev"&&i.name.toLowerCase()==e.toLowerCase()){r=i.abbrev.toUpperCase();return!1}});e=="each"&&(r=r.slice(1));return r}var e={total:{name:"total",children:[{name:"yeas",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]},{name:"nays",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]}]},AL:{name:"AL",children:[{name:"yeas",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]},{name:"nays",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]}]},AK:{name:"AK",children:[{name:"yeas",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]},{name:"nays",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]}]},AZ:{name:"AZ",children:[{name:"yeas",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]},{name:"nays",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]}]},AR:{name:"AR",children:[{name:"yeas",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]},{name:"nays",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]}]},CA:{name:"CA",children:[{name:"yeas",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]},{name:"nays",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]}]},CO:{name:"CO",children:[{name:"yeas",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]},{name:"nays",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]}]},CT:{name:"CT",children:[{name:"yeas",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]},{name:"nays",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]}]},DE:{name:"DE",children:[{name:"yeas",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]},{name:"nays",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]}]},FL:{name:"FL",children:[{name:"yeas",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]},{name:"nays",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]}]},GA:{name:"GA",children:[{name:"yeas",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]},{name:"nays",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]}]},HI:{name:"HI",children:[{name:"yeas",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]},{name:"nays",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]}]},ID:{name:"ID",children:[{name:"yeas",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]},{name:"nays",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]}]},IL:{name:"IL",children:[{name:"yeas",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]},{name:"nays",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]}]},IN:{name:"IN",children:[{name:"yeas",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]},{name:"nays",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]}]},IA:{name:"IA",children:[{name:"yeas",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]},{name:"nays",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]}]},KS:{name:"KS",children:[{name:"yeas",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]},{name:"nays",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]}]},KY:{name:"KY",children:[{name:"yeas",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]},{name:"nays",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]}]},LA:{name:"LA",children:[{name:"yeas",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]},{name:"nays",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]}]},ME:{name:"ME",children:[{name:"yeas",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]},{name:"nays",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]}]},MD:{name:"MD",children:[{name:"yeas",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]},{name:"nays",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]}]},MA:{name:"MA",children:[{name:"yeas",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]},{name:"nays",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]}]},MI:{name:"MI",children:[{name:"yeas",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]},{name:"nays",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]}]},MN:{name:"MN",children:[{name:"yeas",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]},{name:"nays",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]}]},MS:{name:"MS",children:[{name:"yeas",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]},{name:"nays",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]}]},MO:{name:"MO",children:[{name:"yeas",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]},{name:"nays",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]}]},MT:{name:"MT",children:[{name:"yeas",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]},{name:"nays",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]}]},NE:{name:"NE",children:[{name:"yeas",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]},{name:"nays",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]}]},NV:{name:"NV",children:[{name:"yeas",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]},{name:"nays",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]}]},NH:{name:"NH",children:[{name:"yeas",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]},{name:"nays",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]}]},NJ:{name:"NJ",children:[{name:"yeas",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]},{name:"nays",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]}]},NM:{name:"NM",children:[{name:"yeas",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]},{name:"nays",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]}]},NY:{name:"NY",children:[{name:"yeas",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]},{name:"nays",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]}]},NC:{name:"NC",children:[{name:"yeas",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]},{name:"nays",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]}]},ND:{name:"ND",children:[{name:"yeas",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]},{name:"nays",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]}]},OH:{name:"OH",children:[{name:"yeas",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]},{name:"nays",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]}]},OK:{name:"OK",children:[{name:"yeas",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]},{name:"nays",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]}]},OR:{name:"OR",children:[{name:"yeas",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]},{name:"nays",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]}]},PA:{name:"PA",children:[{name:"yeas",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]},{name:"nays",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]}]},RI:{name:"RI",children:[{name:"yeas",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]},{name:"nays",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]}]},SC:{name:"SC",children:[{name:"yeas",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]},{name:"nays",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]}]},SD:{name:"SD",children:[{name:"yeas",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]},{name:"nays",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]}]},TN:{name:"TN",children:[{name:"yeas",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]},{name:"nays",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]}]},TX:{name:"TX",children:[{name:"yeas",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]},{name:"nays",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]}]},UT:{name:"UT",children:[{name:"yeas",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]},{name:"nays",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]}]},VT:{name:"VT",children:[{name:"yeas",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]},{name:"nays",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]}]},VA:{name:"VA",children:[{name:"yeas",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]},{name:"nays",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]}]},WA:{name:"WA",children:[{name:"yeas",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]},{name:"nays",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]}]},WV:{name:"WV",children:[{name:"yeas",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]},{name:"nays",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]}]},WI:{name:"WI",children:[{name:"yeas",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]},{name:"nays",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]}]},WY:{name:"WY",children:[{name:"yeas",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]},{name:"nays",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]}]}},t={},n={};$.get("assets/bill_test.json",function(r){$.each(r.votes.yeas,function(t,n){if(this.party=="D"){e[this.state].children[0].children[0].size++;e.total.children[0].children[0].size++}else if(this.party=="R"){e[this.state].children[0].children[1].size++;e.total.children[0].children[1].size++}else{e[this.state].children[0].children[2].size++;e.total.children[0].children[2].size++}});$.each(r.votes.nays,function(t,n){if(this.party=="D"){e[this.state].children[1].children[0].size++;e.total.children[1].children[0].size++}else if(this.party=="R"){e[this.state].children[1].children[1].size++;e.total.children[1].children[1].size++}else{e[this.state].children[1].children[2].size++;e.total.children[1].children[2].size++}});var o=r.billType.charAt(0);if(o=="s"||o=="S"){t.chamber="Senate";t.yeas={};t.nays={};$.each(r.votes.yeas,function(e,n){isNaN(t.yeas[this.state])?t.yeas[this.state]=1:t.yeas[this.state]++});$.each(r.votes.nays,function(e,n){isNaN(t.nays[this.state])?t.nays[this.state]=1:t.nays[this.state]++})}else t.chamber="House";t.yeasTotal=r.votes.yeaTotal;t.naysTotal=r.votes.nayTotal;n=r.votes;i.hide();p.hide();m.hide();s(e,"total",r.votes.notVotingTotal,r.votes.presentTotal);d(t);$(".poliViewType li:eq(1)").trigger("click")});$("#graphs").append($("<div>").attr("class","large-4 small-10 large-uncentered small-centered columns graph").attr("id","voteBD").append($("<h4>").attr("class","h4Pad").text("Vote Breakdown")).append($("<div>").attr("class","sharable").append($("<span>").attr("aria-hidden",!0).attr("class","icon-earth")).append($("<span>").text("Share"))));var r={};r.width=300;r.height=300;r.radius=Math.min(r.width,r.height)/2;r.color=d3.scale.ordinal().range(["#C4D117","#DDDDDD","#61D2D6","#EA3556","#888888"]).domain(d3.range(0,5));r.svg=d3.select("#voteBD").append("svg").attr("width","100%").attr("height","100%").attr("viewBox","0 0 "+Math.min(r.width,r.height)+" "+Math.min(r.width,r.height)).attr("preserveAspectRatio","xMinYMin").append("g").attr("transform","translate("+r.width/2+","+r.height/2+") rotate(90)");r.partition=d3.layout.partition().sort(null).size([2*Math.PI,r.radius*r.radius]).value(function(e){return e.size});r.arc=d3.svg.arc().startAngle(function(e){return e.x}).endAngle(function(e){return e.x+e.dx}).innerRadius(function(e){return e.depth!=2?Math.sqrt(e.y):Math.sqrt(e.y)+22}).outerRadius(function(e){return e.depth!=2?Math.sqrt(e.y+e.dy)+22:Math.sqrt(e.y+e.dy)});r.arc2=d3.svg.arc().startAngle(function(e){return e.x}).endAngle(function(e){return e.x+e.dx}).innerRadius(function(e){return Math.sqrt(e.y)}).outerRadius(function(e){return Math.sqrt(e.y+e.dy)});var i=$("#voteBD");$("#graphs").append($("<div>").attr("class","hide-for-small").append($("<div>").attr("class","large-6 large-offset-2 columns graph").attr("id","geoBD").append($("<h4>").attr("class","h4Pad").text("Geographic Breakdown")).append($("<div>").attr("class","sharable").append($("<span>").attr("aria-hidden",!0).attr("class","icon-earth")).append($("<span>").text("Share"))))).append($("<div>").attr("class","show-for-small").append($("<h4>").attr("class","small-12 columns h4Pad").text("Geographic Breakdown")).append($("<form>").attr("class","small-12 columns custom").append($("<select>").attr("class","large expand").attr("id","stateSelector").append($("<option>").attr("selected","selected").text("All states")).append(c()))));$(document).on("change","#stateSelector",function(){var t=$(this).val();if(t=="All states"){s(e,"total",n.notVotingTotal,n.present);$('input[name="filterPoliticians"]').val("");y("")}else{s(e,b(t,"abbrev"),n.notVotingTotal,n.present);$('input[name="filterPoliticians"]').val(t);y(t)}});var h={};h.width=500;h.height=500;h.centered="";h.color=d3.scale.ordinal().range(["#C4D117","#DDDDDD","#CFD671"]).domain(d3.range(0,3));h.svg=d3.select("#geoBD").append("svg").attr("width","100%").attr("height","100%").attr("viewBox","0 0 "+Math.min(h.width,h.height)+" "+Math.min(h.width,h.height)).attr("preserveAspectRatio","xMinYMin");h.projection=d3.geo.albersUsa().scale(900).translate([h.width/2,h.height/2]);h.path=d3.geo.path().projection(h.projection);h.g=h.svg.append("g").attr("transform","translate(100,0)");var p=$("#geoBD");$("#graphs").append($("<div>").attr("class","large-12 columns graph").attr("id","poliView").append($("<h4>").text("Politician Viewer")));var m=$("#poliView");m.append($("<div>").attr("class","row collapse").append($("<form>").attr("class","large-10 small-9 columns").append($("<input>").attr("name","filterPoliticians").attr("type","text").attr("placeholder","Filter by party, politician, or state"))).append($("<div>").attr("class","large-2 small-3 columns").append($("<ul>").attr("class","poliViewType").append($("<li>").append($("<span>").text("View:"))).append($("<li>").attr("data-type","list").append($("<span>").attr("aria-hidden","true").attr("class","icon-list"))).append($("<li>").attr("data-type","heat").append($("<span>").attr("aria-hidden","true").attr("class","icon-user"))))));$(document).on("click",".poliViewType li",function(){if($(this).index()!=0){$(".poliViewType li").each(function(){$(this).removeClass("current")});$(this).addClass("current");g(n,$(this).attr("data-type"));y($('input[name="filterPoliticians"]').val())}});m.find(".row.collapse").before($("<div>").attr("class","d3Tooltip smallCentered"));$(window).on("resize",function(){f();l();v()})})();