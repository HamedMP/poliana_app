(function(){function s(e,t,n,s){function N(e){$("#voteBD .legend li").each(function(){$(this).attr("data-depth")!=e?$(this).hide().removeClass("currentDepth"):$(this).fadeIn(250).addClass("currentDepth")});e==1?r.svg.datum(u[t]).selectAll("path").data(r.partition.nodes).transition().duration(250).attr("d",r.arc):r.svg.datum(u[t]).selectAll("path").data(r.partition.nodes).transition().duration(250).attr("d",r.arc2)}function C(){return parseInt($("#voteBD .legend li.currentDepth").attr("data-depth"))}function k(e){$("#voteBD .voteBD-center li").removeClass("currentCenter").hide();$("#voteBD .voteBD-center li:eq("+e+")").addClass("currentCenter").fadeIn(250)}function L(){return parseInt($("#voteBD .voteBD-center li.currentCenter").index())}function A(e){e==1?i.find(".d3Tooltip").html("").removeClass("taller").append($("<ul>").attr("class","tooltipSplit").append($("<li>").append($("<span>").attr("class","title").text(h)).append($("<span>").attr("class","amount").text(d+"%")).append($("<span>").attr("class","subAmount").text(m+" votes"))).append($("<li>").append($("<span>").attr("class","title").text(p)).append($("<span>").attr("class","amount").text(v+"%")).append($("<span>").attr("class","subAmount").text(g+" votes")))):i.find(".d3Tooltip").html("").addClass("taller").append($("<ul>").attr("class","tooltipSplit").append($("<li>").append($("<span>").attr("class","title").text(h)).append($("<ul>").attr("class","legend").append($("<li>").append($("<span>").attr("class","square").css("background",r.color(2))).append($("<span>").attr("class","title").text(y+"%"))).append($("<li>").append($("<span>").attr("class","square").css("background",r.color(3))).append($("<span>").attr("class","title").text(b+"%"))).append($("<li>").append($("<span>").attr("class","square").css("background",r.color(4))).append($("<span>").attr("class","title").text(w+"%"))))).append($("<li>").append($("<span>").attr("class","title").text(p)).append($("<ul>").attr("class","legend").append($("<li>").append($("<span>").attr("class","square").css("background",r.color(2))).append($("<span>").attr("class","title").text(E+"%"))).append($("<li>").append($("<span>").attr("class","square").css("background",r.color(3))).append($("<span>").attr("class","title").text(S+"%"))).append($("<li>").append($("<span>").attr("class","square").css("background",r.color(4))).append($("<span>").attr("class","title").text(x+"%"))))))}var u=JSON.parse(JSON.stringify(e)),l=u[t].children[0].children[0].size+u[t].children[0].children[1].size+u[t].children[0].children[2].size,c=u[t].children[1].children[0].size+u[t].children[1].children[1].size+u[t].children[1].children[2].size;if(l>c)var h="yeas",p="nays",d=parseInt(l/(l+c+n+s)*100),v=parseInt(c/(l+c+n+s)*100),m=l,g=c,y=parseInt(u[t].children[0].children[0].size/l*100),b=parseInt(u[t].children[0].children[1].size/l*100),w=parseInt(u[t].children[0].children[2].size/l*100),E=parseInt(u[t].children[1].children[0].size/c*100),S=parseInt(u[t].children[1].children[1].size/c*100),x=parseInt(u[t].children[1].children[2].size/c*100);else if(l<c)var h="nays",p="yeas",d=parseInt(c/(l+c+n+s)*100),v=parseInt(l/(l+c+n+s)*100),m=c,g=l,y=parseInt(u[t].children[1].children[0].size/c*100),b=parseInt(u[t].children[1].children[1].size/c*100),w=parseInt(u[t].children[1].children[2].size/c*100),E=parseInt(u[t].children[0].children[0].size/l*100),S=parseInt(u[t].children[0].children[1].size/l*100),x=parseInt(u[t].children[0].children[2].size/l*100);else var h="draw",p="draw",d,m=50,v,g=50,y=parseInt(u[t].children[0].children[0].size/l*100),b=parseInt(u[t].children[0].children[1].size/l*100),w=parseInt(u[t].children[0].children[2].size/l*100),E=parseInt(u[t].children[1].children[0].size/c*100),S=parseInt(u[t].children[1].children[1].size/c*100),x=parseInt(u[t].children[1].children[2].size/c*100);i.find("h4").after($("<ul>").attr("class","legend top").append($("<li>").attr("data-depth",1).append($("<span>").attr("class","square").css("background",r.color(0))).append($("<span>").attr("class","title").text(h))).append($("<li>").attr("data-depth",1).append($("<span>").attr("class","square").css("background",r.color(1))).append($("<span>").attr("class","title").text(p))).append($("<li>").attr("data-depth",2).append($("<span>").attr("class","square").css("background",r.color(2))).append($("<span>").attr("class","title").text("Democrat"))).append($("<li>").attr("data-depth",2).append($("<span>").attr("class","square").css("background",r.color(3))).append($("<span>").attr("class","title").text("Republican"))).append($("<li>").attr("data-depth",2).append($("<span>").attr("class","square").css("background",r.color(4))).append($("<span>").attr("class","title").text("Independent"))));i.find(".legend").after($("<ul>").attr("class","voteBD-center interactive").append($("<li>").append($("<span>").attr("class","title").text(h)).append($("<span>").attr("class","amount").text(d+"%"))).append($("<li>").append($("<span>").attr("class","title").text(p)).append($("<span>").attr("class","amount").text(v+"%"))));i.find("svg").before($("<div>").attr("class","d3Tooltip"));var T=r.svg.datum(u[t]).selectAll("path").data(r.partition.nodes).enter().append("path").attr("d",r.arc).attr("class","interactive").attr("data-depth",function(e){return e.depth}).style("stroke-width","1px").style("stroke","#fafafa").style("fill",function(e){return e.depth==0?"#fafafa":e.depth==1?e.name==h?r.color(0):r.color(1):e.name=="D"?r.color(2):e.name=="R"?r.color(3):r.color(4)}).each(o);i.fadeIn(500);N(1);k(0);a();f();i.find("path").on("click",function(){if($(this).attr("data-depth")==0)L()==1?k(0):k(1);else if(C()==1){N(2);A(2)}else{N(1);A(1)}}).on("mouseover",function(){$(this).attr("data-depth")!=0&&i.find(".d3Tooltip").show()}).on("mouseout",function(){i.find(".d3Tooltip").hide()}).on("mousemove",throttle(function(e){A(C());var t=e.pageX-i.offset().left,n=e.pageY-i.offset().top;i.find(".d3Tooltip").css("left",t+10).css("top",n+10)},10));i.find(".voteBD-center").on("click",function(){i.find("path:first-of-type").trigger("click")})}function o(e){e.x0=e.x;e.dx0=e.dx}function u(e){var t=d3.interpolate({x:e.x0,dx:e.dx0},e);return function(n){var i=t(n);e.x0=i.x;e.dx0=i.dx;return r.arc(i)}}function a(){var e=i.find("svg g:first-of-type"),t=e[0].getBoundingClientRect().height,n=e[0].getBoundingClientRect().width,r=i.find(".voteBD-center"),s=r.height(),o=r.width();r.css("margin-top",t/2-s/2-12).css("margin-left",n/2-o/2-3)}function f(){var e=i.find("svg"),t=e.width();e.height(t+20)}function l(){var e=y("each","name").split(","),t="";$.each(e,function(n,r){t+="<option>"+e[n]+"</option>"});return t}function p(e){function r(e){h.find(".d3Tooltip").fadeOut(250);var t,n,r;if(e&&c.centered!==e){var i=c.path.centroid(e);t=i[0]-40;n=i[1];r=3;c.centered=e;var s=y(e.id,"name");$('input[name="filterPoliticians"]').val(s);g(s)}else{t=147;n=c.height/2;r=1;c.centered=null;$('input[name="filterPoliticians"]').val("");g("")}c.g.selectAll("path").classed("active",c.centered&&function(e){return e===c.centered});c.g.transition().duration(500).attr("transform","translate("+c.width/2+","+c.height/2+") scale("+r+") translate("+ -t+","+ -n+")");d();h.find(".d3Tooltip").fadeIn(250)}function i(r){var i=y(r,"name");if(e[t][r]==undefined)var s=0;else var s=e[t][r];if(e[n][r]==undefined)var o=0;else var o=e[n][r];var u=parseInt(s/(s+o)*100),a=parseInt(o/(s+o)*100);isNaN(u)&&(u=0);isNaN(a)&&(a=0);h.find(".d3Tooltip").html("").addClass("taller").append($("<h5>").text(i)).append($("<ul>").attr("class","tooltipSplit").append($("<li>").append($("<span>").attr("class","title").text(t)).append($("<span>").attr("class","amount").text(u+"%")).append($("<span>").attr("class","subAmount").text(s+" votes"))).append($("<li>").append($("<span>").attr("class","title").text(n)).append($("<span>").attr("class","amount").text(a+"%")).append($("<span>").attr("class","subAmount").text(o+" votes"))))}var t,n;if(e.yeasTotal>e.naysTotal){t="yeas";n="nays"}else if(e.yeasTotal<e.naysTotal){t="nays";n="yeas"}else{t="draw";n="draw"}d3.json("/assets/us.json",function(s,o){c.g.append("g").selectAll("path").data(topojson.feature(o,o.objects.states).features).enter().append("path").attr("d",c.path).attr("fill",function(r){if(e.chamber=="Senate")return e[t][r.id]==0||e[t][r.id]==undefined?c.colorSenate(1):e[t][r.id]==1?c.colorSenate(2):c.colorSenate(0);var i;e[t][r.id]!=undefined&&e[n][r.id]==undefined?i=100:e[t][r.id]==undefined&&e[n][r.id]!=undefined?i=0:i=parseInt(e[t][r.id]/(e[t][r.id]+e[n][r.id])*100);return isNaN(i)?"#888888":i<=100&&i>80?c.colorHouse(0):i<=80&&i>60?c.colorHouse(1):i<=60&&i>40?c.colorHouse(2):i<=40&&i>20?c.colorHouse(3):c.colorHouse(4)}).style("stroke-width","1px").style("stroke","#fafafa").attr("class","interactive").on("mouseover",function(e){i(e.id)}).on("click",r);h.find("path").on("mouseover",function(){h.find(".d3Tooltip").show()}).on("mouseout",function(){h.find(".d3Tooltip").hide()}).on("mousemove",throttle(function(e){var t=e.pageX-h.offset().left,n=e.pageY-h.offset().top;h.find(".d3Tooltip").css("left",t+10).css("top",n+10)},10));e.chamber=="Senate"?h.find("h4").after($("<ul>").attr("class","legend top").append($("<li>").append($("<span>").attr("class","square").css("background",c.colorSenate(0))).append($("<span>").attr("class","title").text(t))).append($("<li>").append($("<span>").attr("class","square").css("background",c.colorSenate(1))).append($("<span>").attr("class","title").text(n)))):h.find("h4").after($("<ul>").attr("class","legend top leftFloat").append($("<li>").append($("<span>").attr("class","title").text(t)).append($("<span>").attr("class","square").css("background",c.colorHouse(0)))).append($("<li>").append($("<span>").attr("class","square").css("background",c.colorHouse(1)))).append($("<li>").append($("<span>").attr("class","square").css("background",c.colorHouse(2)))).append($("<li>").append($("<span>").attr("class","square").css("background",c.colorHouse(3)))).append($("<li>").append($("<span>").attr("class","square").css("background",c.colorHouse(4))).append($("<span>").attr("class","title").text(n))))});h.find("svg").before($("<div>").attr("class","d3Tooltip"));h.fadeIn(500)}function d(){var e=h.find("svg"),t=i.find("svg").width();e.height(t+20)}function m(e,t){function n(t){var n;e.yeaTotal>e.nayTotal?n="Yeas":e.yeaTotal<e.nayTotal?n="Nays":n="Draw";return t==n?t+'<span aria-hidden="true" class="icon-trophy"></span>':t}function r(n){var r=$("<div>");if(e[n]!=undefined)if(t=="list"){r.append($("<table>").append($("<thead>").append($("<tr>").append($("<th>").attr("width",60).attr("data-sort","string").text("Party")).append($("<th>").attr("width",60).attr("data-sort","string").text("State")).append($("<th>").attr("data-sort","string").text("Name")))).append($("<tbody>")));$.each(e[n],function(e,t){if(this.party=="Democrat"||this.party=="D")this.party="D";else if(this.party=="Republican"||this.party=="R")this.party="R";else if(this.party=="Independent"||this.party=="I")this.party="I";this._id==null&&(this._id=this.bioguideId);r.find("tbody").append($("<tr>").attr("data-party",this.party).attr("data-partylong",s(this.party)).attr("data-state",this.state).attr("data-statelong",y(this.state,"name")).attr("data-name",this.firstName+" "+this.lastName).append($("<td>").append($("<span>").css("background",i(this.party)).text(this.party))).append($("<td>").text(this.state)).append($("<td>").append($("<a>").attr("href","/politicians/"+this.firstName.toLowerCase().replace(/\s+/g,"").replace(/"(.*?)"/ig,"")+"-"+this.lastName.toLowerCase().replace(/\s+/g,"").replace(/"(.*?)"/ig,"")+"/"+this._id).text(this.firstName+" "+this.lastName))))})}else{r.append($("<ul>"));$.each(e[n],function(e,t){if(this.party=="Democrat"||this.party=="D")this.party="D";else if(this.party=="Republican"||this.party=="R")this.party="R";else if(this.party=="Independent"||this.party=="I")this.party="I";this._id==null&&(this._id=this.bioguideId);r.find("ul").append($("<li>").attr("data-party",this.party).attr("data-partylong",s(this.party)).attr("data-state",this.state).attr("data-statelong",y(this.state,"name")).attr("data-name",this.firstName+" "+this.lastName).css("background-image","url(/assets/pictures/congress-113/"+this._id+".jpg)").append($("<a>").attr("href","/politicians/"+this.firstName.toLowerCase().replace(/\s+/g,"").replace(/"(.*?)"/ig,"")+"-"+this.lastName.toLowerCase().replace(/\s+/g,"").replace(/"(.*?)"/ig,"")+"/"+this._id).append($("<span>").css("background",i(this.party)))))})}else n=="yeas"?r.append($("<p>").attr("class","aligncenter").text("No members voted yea")):n=="nays"?r.append($("<p>").attr("class","aligncenter").text("No members voted nay")):n=="notVoting"?r.append($("<p>").attr("class","aligncenter").text("All members voted")):r.append($("<p>").attr("class","aligncenter").text("All members were present"));return r}function i(e){return e=="D"||e=="Democrat"?"#61D2D6":e=="R"||e=="Republican"?"#EA3556":"#888888"}function s(e){return e=="D"?"Democrat":e=="R"?"Republican":"Independent"}function o(e,t,n){v.find(".d3Tooltip").html("").append($("<h5>").text(e).append($("<p>").text(n+" - "+t)))}$(".poliViewColumn").remove();v.append($("<div>").attr("class","row").append($("<div>").attr("class","large-4 columns").append($("<div>").attr("class","poliViewColumn").append($("<div>").append($("<h5>").html(n("Yeas"))).append($("<p>").text(e.yeaTotal+" votes"))).append(r("yeas")))).append($("<div>").attr("class","large-4 columns").append($("<div>").attr("class","poliViewColumn").append($("<div>").append($("<h5>").html(n("Nays"))).append($("<p>").text(e.nayTotal+" votes"))).append(r("nays")))).append($("<div>").attr("class","large-4 columns").append($("<div>").attr("class","poliViewColumn").append($("<div>").append($("<h5>").text("Didn't Vote")).append($("<p>").text(e.notVotingTotal+" members"))).append(r("notVoting"))).append($("<div>").attr("class","poliViewColumn").append($("<div>").append($("<h5>").text("Absent")).append($("<p>").text(e.presentTotal+" members"))).append(r("present")))));v.find("table").stupidtable().find("th:eq(1)").trigger("click");$(document).on("keyup",'input[name="filterPoliticians"]',function(){g($(this).val())}).on("keypress",'input[name="filterPoliticians"]',function(e){e.which==13&&e.preventDefault()});v.find(".poliViewColumn li").on("mouseover",function(){v.find(".d3Tooltip").show()}).on("mouseout",function(){v.find(".d3Tooltip").hide()}).on("mousemove",throttle(function(e){var t=e.pageX-v.offset().left,n=e.pageY-v.offset().top;v.find(".d3Tooltip").css("left",t+10).css("top",n+10)},10)).on("mouseenter",function(){o($(this).attr("data-name"),$(this).attr("data-statelong"),$(this).attr("data-party"))});v.fadeIn(500)}function g(e){e=e.toLowerCase();$(".poliViewColumn tbody tr, .poliViewColumn li").each(function(){$(this).attr("data-partylong").toLowerCase().indexOf(e)==-1&&$(this).attr("data-state").toLowerCase().indexOf(e)==-1&&$(this).attr("data-statelong").toLowerCase().indexOf(e)==-1&&$(this).attr("data-name").toLowerCase().indexOf(e)==-1?$(this).addClass("hide"):$(this).removeClass("hide")});$(".poliViewColumn tbody, .poliViewColumn ul").each(function(){var e=$(this).children().not(".hide").length,t=$(this).parents(".poliViewColumn").find("div:first-of-type p"),n=t.text().substr(t.text().indexOf(" "));t.text(e+n)})}function y(e,t){var n=new Array({name:"Alabama",abbrev:"AL"},{name:"Alaska",abbrev:"AK"},{name:"Arizona",abbrev:"AZ"},{name:"Arkansas",abbrev:"AR"},{name:"California",abbrev:"CA"},{name:"Colorado",abbrev:"CO"},{name:"Connecticut",abbrev:"CT"},{name:"Delaware",abbrev:"DE"},{name:"Florida",abbrev:"FL"},{name:"Georgia",abbrev:"GA"},{name:"Hawaii",abbrev:"HI"},{name:"Idaho",abbrev:"ID"},{name:"Illinois",abbrev:"IL"},{name:"Indiana",abbrev:"IN"},{name:"Iowa",abbrev:"IA"},{name:"Kansas",abbrev:"KS"},{name:"Kentucky",abbrev:"KY"},{name:"Louisiana",abbrev:"LA"},{name:"Maine",abbrev:"ME"},{name:"Maryland",abbrev:"MD"},{name:"Massachusetts",abbrev:"MA"},{name:"Michigan",abbrev:"MI"},{name:"Minnesota",abbrev:"MN"},{name:"Mississippi",abbrev:"MS"},{name:"Missouri",abbrev:"MO"},{name:"Montana",abbrev:"MT"},{name:"Nebraska",abbrev:"NE"},{name:"Nevada",abbrev:"NV"},{name:"New Hampshire",abbrev:"NH"},{name:"New Jersey",abbrev:"NJ"},{name:"New Mexico",abbrev:"NM"},{name:"New York",abbrev:"NY"},{name:"North Carolina",abbrev:"NC"},{name:"North Dakota",abbrev:"ND"},{name:"Ohio",abbrev:"OH"},{name:"Oklahoma",abbrev:"OK"},{name:"Oregon",abbrev:"OR"},{name:"Pennsylvania",abbrev:"PA"},{name:"Rhode Island",abbrev:"RI"},{name:"South Carolina",abbrev:"SC"},{name:"South Dakota",abbrev:"SD"},{name:"Tennessee",abbrev:"TN"},{name:"Texas",abbrev:"TX"},{name:"Utah",abbrev:"UT"},{name:"Vermont",abbrev:"VT"},{name:"Virginia",abbrev:"VA"},{name:"Washington",abbrev:"WA"},{name:"West Virginia",abbrev:"WV"},{name:"Wisconsin",abbrev:"WI"},{name:"Wyoming",abbrev:"WY"}),r="";$.each(n,function(n,i){if(e=="each")t=="name"?r+=","+i.name:t=="abbrev"&&(r+=","+i.abbrev.toUpperCase());else if(t=="name"){if(i.abbrev.toLowerCase()==e.toLowerCase()){r=i.name;return!1}}else if(t=="abbrev"&&i.name.toLowerCase()==e.toLowerCase()){r=i.abbrev.toUpperCase();return!1}});e=="each"&&(r=r.slice(1));return r}var e={total:{name:"total",children:[{name:"yeas",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]},{name:"nays",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]}]},AL:{name:"AL",children:[{name:"yeas",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]},{name:"nays",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]}]},AK:{name:"AK",children:[{name:"yeas",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]},{name:"nays",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]}]},AZ:{name:"AZ",children:[{name:"yeas",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]},{name:"nays",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]}]},AR:{name:"AR",children:[{name:"yeas",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]},{name:"nays",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]}]},CA:{name:"CA",children:[{name:"yeas",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]},{name:"nays",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]}]},CO:{name:"CO",children:[{name:"yeas",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]},{name:"nays",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]}]},CT:{name:"CT",children:[{name:"yeas",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]},{name:"nays",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]}]},DE:{name:"DE",children:[{name:"yeas",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]},{name:"nays",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]}]},FL:{name:"FL",children:[{name:"yeas",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]},{name:"nays",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]}]},GA:{name:"GA",children:[{name:"yeas",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]},{name:"nays",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]}]},HI:{name:"HI",children:[{name:"yeas",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]},{name:"nays",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]}]},ID:{name:"ID",children:[{name:"yeas",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]},{name:"nays",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]}]},IL:{name:"IL",children:[{name:"yeas",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]},{name:"nays",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]}]},IN:{name:"IN",children:[{name:"yeas",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]},{name:"nays",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]}]},IA:{name:"IA",children:[{name:"yeas",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]},{name:"nays",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]}]},KS:{name:"KS",children:[{name:"yeas",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]},{name:"nays",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]}]},KY:{name:"KY",children:[{name:"yeas",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]},{name:"nays",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]}]},LA:{name:"LA",children:[{name:"yeas",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]},{name:"nays",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]}]},ME:{name:"ME",children:[{name:"yeas",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]},{name:"nays",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]}]},MD:{name:"MD",children:[{name:"yeas",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]},{name:"nays",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]}]},MA:{name:"MA",children:[{name:"yeas",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]},{name:"nays",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]}]},MI:{name:"MI",children:[{name:"yeas",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]},{name:"nays",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]}]},MN:{name:"MN",children:[{name:"yeas",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]},{name:"nays",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]}]},MS:{name:"MS",children:[{name:"yeas",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]},{name:"nays",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]}]},MO:{name:"MO",children:[{name:"yeas",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]},{name:"nays",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]}]},MT:{name:"MT",children:[{name:"yeas",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]},{name:"nays",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]}]},NE:{name:"NE",children:[{name:"yeas",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]},{name:"nays",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]}]},NV:{name:"NV",children:[{name:"yeas",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]},{name:"nays",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]}]},NH:{name:"NH",children:[{name:"yeas",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]},{name:"nays",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]}]},NJ:{name:"NJ",children:[{name:"yeas",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]},{name:"nays",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]}]},NM:{name:"NM",children:[{name:"yeas",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]},{name:"nays",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]}]},NY:{name:"NY",children:[{name:"yeas",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]},{name:"nays",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]}]},NC:{name:"NC",children:[{name:"yeas",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]},{name:"nays",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]}]},ND:{name:"ND",children:[{name:"yeas",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]},{name:"nays",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]}]},OH:{name:"OH",children:[{name:"yeas",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]},{name:"nays",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]}]},OK:{name:"OK",children:[{name:"yeas",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]},{name:"nays",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]}]},OR:{name:"OR",children:[{name:"yeas",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]},{name:"nays",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]}]},PA:{name:"PA",children:[{name:"yeas",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]},{name:"nays",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]}]},RI:{name:"RI",children:[{name:"yeas",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]},{name:"nays",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]}]},SC:{name:"SC",children:[{name:"yeas",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]},{name:"nays",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]}]},SD:{name:"SD",children:[{name:"yeas",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]},{name:"nays",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]}]},TN:{name:"TN",children:[{name:"yeas",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]},{name:"nays",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]}]},TX:{name:"TX",children:[{name:"yeas",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]},{name:"nays",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]}]},UT:{name:"UT",children:[{name:"yeas",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]},{name:"nays",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]}]},VT:{name:"VT",children:[{name:"yeas",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]},{name:"nays",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]}]},VA:{name:"VA",children:[{name:"yeas",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]},{name:"nays",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]}]},WA:{name:"WA",children:[{name:"yeas",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]},{name:"nays",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]}]},WV:{name:"WV",children:[{name:"yeas",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]},{name:"nays",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]}]},WI:{name:"WI",children:[{name:"yeas",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]},{name:"nays",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]}]},WY:{name:"WY",children:[{name:"yeas",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]},{name:"nays",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]}]}},t={},n={};$.get("/assets/bill_test_senate.json",function(r){$.each(r.votes.yeas,function(t,n){if(this.party=="D"||this.party=="Democrat"){e[this.state].children[0].children[0].size++;e.total.children[0].children[0].size++}else if(this.party=="R"||this.party=="Republican"){e[this.state].children[0].children[1].size++;e.total.children[0].children[1].size++}else{e[this.state].children[0].children[2].size++;e.total.children[0].children[2].size++}});$.each(r.votes.nays,function(t,n){if(this.party=="D"||this.party=="Democrat"){e[this.state].children[1].children[0].size++;e.total.children[1].children[0].size++}else if(this.party=="R"||this.party=="Republican"){e[this.state].children[1].children[1].size++;e.total.children[1].children[1].size++}else{e[this.state].children[1].children[2].size++;e.total.children[1].children[2].size++}});var o=r.billType.charAt(0);o=="s"||o=="S"?t.chamber="Senate":t.chamber="House";t.yeas={};t.nays={};$.each(r.votes.yeas,function(e,n){isNaN(t.yeas[this.state])?t.yeas[this.state]=1:t.yeas[this.state]++});$.each(r.votes.nays,function(e,n){isNaN(t.nays[this.state])?t.nays[this.state]=1:t.nays[this.state]++});t.yeasTotal=r.votes.yeaTotal;t.naysTotal=r.votes.nayTotal;n=r.votes;i.hide();h.hide();v.hide();s(e,"total",r.votes.notVotingTotal,r.votes.presentTotal);p(t);$(".poliViewType li:eq(1)").trigger("click")});$("#graphs").append($("<div>").attr("class","large-4 small-10 large-uncentered small-centered columns graph").attr("id","voteBD").append($("<h4>").attr("class","h4Pad").text("Vote Breakdown")).append($("<div>").attr("class","sharable").append($("<span>").attr("aria-hidden",!0).attr("class","icon-earth")).append($("<span>").text("Share"))));var r={};r.width=300;r.height=300;r.radius=Math.min(r.width,r.height)/2;r.color=d3.scale.ordinal().range(["#C4D117","#DDDDDD","#61D2D6","#EA3556","#888888"]).domain(d3.range(0,5));r.svg=d3.select("#voteBD").append("svg").attr("width","100%").attr("height","100%").attr("viewBox","0 0 "+Math.min(r.width,r.height)+" "+Math.min(r.width,r.height)).attr("preserveAspectRatio","xMinYMin").append("g").attr("transform","translate("+r.width/2+","+r.height/2+") rotate(90)");r.partition=d3.layout.partition().sort(null).size([2*Math.PI,r.radius*r.radius]).value(function(e){return e.size});r.arc=d3.svg.arc().startAngle(function(e){return e.x}).endAngle(function(e){return e.x+e.dx}).innerRadius(function(e){return e.depth!=2?Math.sqrt(e.y):Math.sqrt(e.y)+22}).outerRadius(function(e){return e.depth!=2?Math.sqrt(e.y+e.dy)+22:Math.sqrt(e.y+e.dy)});r.arc2=d3.svg.arc().startAngle(function(e){return e.x}).endAngle(function(e){return e.x+e.dx}).innerRadius(function(e){return Math.sqrt(e.y)}).outerRadius(function(e){return Math.sqrt(e.y+e.dy)});var i=$("#voteBD");$("#graphs").append($("<div>").attr("class","hide-for-small").append($("<div>").attr("class","large-6 large-offset-2 columns graph").attr("id","geoBD").append($("<h4>").attr("class","h4Pad").text("Geographic Breakdown")).append($("<div>").attr("class","sharable").append($("<span>").attr("aria-hidden",!0).attr("class","icon-earth")).append($("<span>").text("Share"))))).append($("<div>").attr("class","show-for-small").append($("<h4>").attr("class","small-12 columns h4Pad").text("Geographic Breakdown")).append($("<form>").attr("class","small-12 columns custom").append($("<select>").attr("class","large expand").attr("id","stateSelector").append($("<option>").attr("selected","selected").text("All states")).append(l()))));$(document).on("change","#stateSelector",function(){var e=$(this).val();if(e=="All states"){$('input[name="filterPoliticians"]').val("");g("")}else{$('input[name="filterPoliticians"]').val(e);g(e)}});var c={};c.width=500;c.height=500;c.centered="";c.colorSenate=d3.scale.ordinal().range(["#C4D117","#DDDDDD","#CFD671"]).domain(d3.range(0,3));c.colorHouse=d3.scale.ordinal().range(["#C4D117","#CAD449","#D1D77A","#D7DAAC","#DDDDDD"]).domain(d3.range(0,5));c.svg=d3.select("#geoBD").append("svg").attr("width","100%").attr("height","100%").attr("viewBox","0 0 "+Math.min(c.width,c.height)+" "+Math.min(c.width,c.height)).attr("preserveAspectRatio","xMinYMin");c.projection=d3.geo.albersUsa().scale(900).translate([c.width/2,c.height/2]);c.path=d3.geo.path().projection(c.projection);c.g=c.svg.append("g").attr("transform","translate(100,0)");var h=$("#geoBD");$("#graphs").append($("<div>").attr("class","large-12 columns graph").attr("id","poliView").append($("<h4>").text("Politician Viewer")));var v=$("#poliView");v.append($("<div>").attr("class","row collapse").append($("<form>").attr("class","large-10 small-9 columns").append($("<input>").attr("name","filterPoliticians").attr("type","text").attr("placeholder","Filter by party, politician, or state"))).append($("<div>").attr("class","large-2 small-3 columns").append($("<ul>").attr("class","poliViewType").append($("<li>").append($("<span>").text("View:"))).append($("<li>").attr("data-type","list").append($("<span>").attr("aria-hidden","true").attr("class","icon-list"))).append($("<li>").attr("data-type","heat").append($("<span>").attr("aria-hidden","true").attr("class","icon-user"))))));$(document).on("click",".poliViewType li",function(){if($(this).index()!=0){$(".poliViewType li").each(function(){$(this).removeClass("current")});$(this).addClass("current");m(n,$(this).attr("data-type"));g($('input[name="filterPoliticians"]').val())}});v.find(".row.collapse").before($("<div>").attr("class","d3Tooltip smallCentered"));$(window).on("resize",function(){a();f();d()})})();