(function(){function o(e,t,n,r){function N(e){$("#voteBD .legend li").each(function(){$(this).attr("data-depth")!=e?$(this).hide().removeClass("currentDepth"):$(this).fadeIn(250).addClass("currentDepth")});e==1?i.svg.datum(o[t]).selectAll("path").data(i.partition.nodes).transition().duration(250).attr("d",i.arc):i.svg.datum(o[t]).selectAll("path").data(i.partition.nodes).transition().duration(250).attr("d",i.arc2)}function C(){return parseInt($("#voteBD .legend li.currentDepth").attr("data-depth"))}function k(e){$("#voteBD .voteBD-center li").removeClass("currentCenter").hide();$("#voteBD .voteBD-center li:eq("+e+")").addClass("currentCenter").fadeIn(250)}function L(){return parseInt($("#voteBD .voteBD-center li.currentCenter").index())}function A(e){e==1?s.find(".d3Tooltip").html("").removeClass("taller").append($("<ul>").attr("class","tooltipSplit").append($("<li>").append($("<span>").attr("class","title").text(h)).append($("<span>").attr("class","amount").text(d+"%")).append($("<span>").attr("class","subAmount").text(m+" votes"))).append($("<li>").append($("<span>").attr("class","title").text(p)).append($("<span>").attr("class","amount").text(v+"%")).append($("<span>").attr("class","subAmount").text(g+" votes")))):s.find(".d3Tooltip").html("").addClass("taller").append($("<ul>").attr("class","tooltipSplit").append($("<li>").append($("<span>").attr("class","title").text(h)).append($("<ul>").attr("class","legend").append($("<li>").append($("<span>").attr("class","square").css("background",i.color(2))).append($("<span>").attr("class","title").text(y+"%"))).append($("<li>").append($("<span>").attr("class","square").css("background",i.color(3))).append($("<span>").attr("class","title").text(b+"%"))).append($("<li>").append($("<span>").attr("class","square").css("background",i.color(4))).append($("<span>").attr("class","title").text(w+"%"))))).append($("<li>").append($("<span>").attr("class","title").text(p)).append($("<ul>").attr("class","legend").append($("<li>").append($("<span>").attr("class","square").css("background",i.color(2))).append($("<span>").attr("class","title").text(E+"%"))).append($("<li>").append($("<span>").attr("class","square").css("background",i.color(3))).append($("<span>").attr("class","title").text(S+"%"))).append($("<li>").append($("<span>").attr("class","square").css("background",i.color(4))).append($("<span>").attr("class","title").text(x+"%"))))))}var o=JSON.parse(JSON.stringify(e)),a=o[t].children[0].children[0].size+o[t].children[0].children[1].size+o[t].children[0].children[2].size,c=o[t].children[1].children[0].size+o[t].children[1].children[1].size+o[t].children[1].children[2].size;if(a>c)var h="yeas",p="nays",d=parseInt(a/(a+c+n+r)*100),v=parseInt(c/(a+c+n+r)*100),m=a,g=c,y=parseInt(o[t].children[0].children[0].size/a*100),b=parseInt(o[t].children[0].children[1].size/a*100),w=parseInt(o[t].children[0].children[2].size/a*100),E=parseInt(o[t].children[1].children[0].size/c*100),S=parseInt(o[t].children[1].children[1].size/c*100),x=parseInt(o[t].children[1].children[2].size/c*100);else if(a<c)var h="nays",p="yeas",d=parseInt(c/(a+c+n+r)*100),v=parseInt(a/(a+c+n+r)*100),m=c,g=a,y=parseInt(o[t].children[1].children[0].size/c*100),b=parseInt(o[t].children[1].children[1].size/c*100),w=parseInt(o[t].children[1].children[2].size/c*100),E=parseInt(o[t].children[0].children[0].size/a*100),S=parseInt(o[t].children[0].children[1].size/a*100),x=parseInt(o[t].children[0].children[2].size/a*100);else var h="draw",p="draw",d,m=50,v,g=50,y=parseInt(o[t].children[0].children[0].size/a*100),b=parseInt(o[t].children[0].children[1].size/a*100),w=parseInt(o[t].children[0].children[2].size/a*100),E=parseInt(o[t].children[1].children[0].size/c*100),S=parseInt(o[t].children[1].children[1].size/c*100),x=parseInt(o[t].children[1].children[2].size/c*100);s.find("h4").after($("<ul>").attr("class","legend top").append($("<li>").attr("data-depth",1).append($("<span>").attr("class","square").css("background",i.color(0))).append($("<span>").attr("class","title").text(h))).append($("<li>").attr("data-depth",1).append($("<span>").attr("class","square").css("background",i.color(1))).append($("<span>").attr("class","title").text(p))).append($("<li>").attr("data-depth",2).append($("<span>").attr("class","square").css("background",i.color(2))).append($("<span>").attr("class","title").text("Democrat"))).append($("<li>").attr("data-depth",2).append($("<span>").attr("class","square").css("background",i.color(3))).append($("<span>").attr("class","title").text("Republican"))).append($("<li>").attr("data-depth",2).append($("<span>").attr("class","square").css("background",i.color(4))).append($("<span>").attr("class","title").text("Independent"))));s.find(".legend").after($("<ul>").attr("class","voteBD-center interactive").append($("<li>").append($("<span>").attr("class","title").text(h)).append($("<span>").attr("class","amount").text(d+"%"))).append($("<li>").append($("<span>").attr("class","title").text(p)).append($("<span>").attr("class","amount").text(v+"%"))));s.find("svg").before($("<div>").attr("class","d3Tooltip"));var T=i.svg.datum(o[t]).selectAll("path").data(i.partition.nodes).enter().append("path").attr("d",i.arc).attr("class","interactive").attr("data-depth",function(e){return e.depth}).style("stroke-width","1px").style("stroke","#fafafa").style("fill",function(e){return e.depth==0?"#fafafa":e.depth==1?e.name==h?i.color(0):i.color(1):e.name=="D"?i.color(2):e.name=="R"?i.color(3):i.color(4)}).each(u);s.fadeIn(500);N(1);k(0);f();l();s.find("path").on("click",function(){if($(this).attr("data-depth")==0)L()==1?k(0):k(1);else if(C()==1){N(2);A(2)}else{N(1);A(1)}}).on("mouseover",function(){$(this).attr("data-depth")!=0&&s.find(".d3Tooltip").show()}).on("mouseout",function(){s.find(".d3Tooltip").hide()}).on("mousemove",throttle(function(e){A(C());var t=e.pageX-s.offset().left,n=e.pageY-s.offset().top;s.find(".d3Tooltip").css("left",t+10).css("top",n+10)},10));s.find(".voteBD-center").on("click",function(){s.find("path:first-of-type").trigger("click")})}function u(e){e.x0=e.x;e.dx0=e.dx}function a(e){var t=d3.interpolate({x:e.x0,dx:e.dx0},e);return function(n){var r=t(n);e.x0=r.x;e.dx0=r.dx;return i.arc(r)}}function f(){var e=s.find("svg g:first-of-type"),t=e[0].getBoundingClientRect().height,n=e[0].getBoundingClientRect().width,r=s.find(".voteBD-center"),i=r.height(),o=r.width();r.css("margin-top",t/2-i/2-12).css("margin-left",n/2-o/2-3)}function l(){var e=s.find("svg"),t=e.width();e.height(t+20)}function c(){var e=b("each","name").split(","),t="";$.each(e,function(n,r){t+="<option>"+e[n]+"</option>"});return t}function d(e){function r(e){p.find(".d3Tooltip").fadeOut(250);var t,n,r;if(e&&h.centered!==e){var i=h.path.centroid(e);t=i[0]-40;n=i[1];r=3;h.centered=e;var s=b(e.id,"name");$('input[name="filterPoliticians"]').val(s);y(s)}else{t=147;n=h.height/2;r=1;h.centered=null;$('input[name="filterPoliticians"]').val("");y("")}h.g.selectAll("path").classed("active",h.centered&&function(e){return e===h.centered});h.g.transition().duration(500).attr("transform","translate("+h.width/2+","+h.height/2+") scale("+r+") translate("+ -t+","+ -n+")");v();p.find(".d3Tooltip").fadeIn(250)}function i(r){var i=b(r,"name");if(e[t][r]==undefined)var s=0;else var s=e[t][r];if(e[n][r]==undefined)var o=0;else var o=e[n][r];var u=parseInt(s/(s+o)*100),a=parseInt(o/(s+o)*100);isNaN(u)&&(u=0);isNaN(a)&&(a=0);p.find(".d3Tooltip").html("").addClass("taller").append($("<h5>").text(i)).append($("<ul>").attr("class","tooltipSplit").append($("<li>").append($("<span>").attr("class","title").text(t)).append($("<span>").attr("class","amount").text(u+"%")).append($("<span>").attr("class","subAmount").text(s+" votes"))).append($("<li>").append($("<span>").attr("class","title").text(n)).append($("<span>").attr("class","amount").text(a+"%")).append($("<span>").attr("class","subAmount").text(o+" votes"))))}var t,n;if(e.yeasTotal>e.naysTotal){t="yeas";n="nays"}else if(e.yeasTotal<e.naysTotal){t="nays";n="yeas"}else{t="draw";n="draw"}d3.json("/assets/us.json",function(s,o){h.g.append("g").selectAll("path").data(topojson.feature(o,o.objects.states).features).enter().append("path").attr("d",h.path).attr("fill",function(r){if(e.chamber=="Senate")return e[t][r.id]==0||e[t][r.id]==undefined?h.colorSenate(1):e[t][r.id]==1?h.colorSenate(2):h.colorSenate(0);var i;e[t][r.id]!=undefined&&e[n][r.id]==undefined?i=100:e[t][r.id]==undefined&&e[n][r.id]!=undefined?i=0:i=parseInt(e[t][r.id]/(e[t][r.id]+e[n][r.id])*100);return isNaN(i)?"#888888":i<=100&&i>80?h.colorHouse(0):i<=80&&i>60?h.colorHouse(1):i<=60&&i>40?h.colorHouse(2):i<=40&&i>20?h.colorHouse(3):h.colorHouse(4)}).style("stroke-width","1px").style("stroke","#fafafa").attr("class","interactive").on("mouseover",function(e){i(e.id)}).on("click",r);p.find("path").on("mouseover",function(){p.find(".d3Tooltip").show()}).on("mouseout",function(){p.find(".d3Tooltip").hide()}).on("mousemove",throttle(function(e){var t=e.pageX-p.offset().left,n=e.pageY-p.offset().top;p.find(".d3Tooltip").css("left",t+10).css("top",n+10)},10));e.chamber=="Senate"?p.find("h4").after($("<ul>").attr("class","legend top").append($("<li>").append($("<span>").attr("class","square").css("background",h.colorSenate(0))).append($("<span>").attr("class","title").text(t))).append($("<li>").append($("<span>").attr("class","square").css("background",h.colorSenate(1))).append($("<span>").attr("class","title").text(n)))):p.find("h4").after($("<ul>").attr("class","legend top leftFloat").append($("<li>").append($("<span>").attr("class","title").text(t)).append($("<span>").attr("class","square").css("background",h.colorHouse(0)))).append($("<li>").append($("<span>").attr("class","square").css("background",h.colorHouse(1)))).append($("<li>").append($("<span>").attr("class","square").css("background",h.colorHouse(2)))).append($("<li>").append($("<span>").attr("class","square").css("background",h.colorHouse(3)))).append($("<li>").append($("<span>").attr("class","square").css("background",h.colorHouse(4))).append($("<span>").attr("class","title").text(n))))});p.find("svg").before($("<div>").attr("class","d3Tooltip"));p.fadeIn(500)}function v(){var e=p.find("svg"),t=s.find("svg").width();e.height(t+20)}function g(e,t){function n(t){var n;e.yeaTotal>e.nayTotal?n="Yeas":e.yeaTotal<e.nayTotal?n="Nays":n="Draw";return t==n?t+'<span aria-hidden="true" class="icon-trophy"></span>':t}function r(n){var r=$("<div>");if(e[n]!=undefined&&e[n].length!=0)if(t=="list"){r.append($("<table>").append($("<thead>").append($("<tr>").append($("<th>").attr("width",60).attr("data-sort","string").text("Party")).append($("<th>").attr("width",60).attr("data-sort","string").text("State")).append($("<th>").attr("data-sort","string").text("Name")))).append($("<tbody>")));$.each(e[n],function(e,t){if(this.party=="Democrat"||this.party=="D")this.party="D";else if(this.party=="Republican"||this.party=="R")this.party="R";else if(this.party=="Independent"||this.party=="I")this.party="I";this._id=this.bioguideId;r.find("tbody").append($("<tr>").attr("data-party",this.party).attr("data-partylong",s(this.party)).attr("data-state",this.termState).attr("data-statelong",b(this.termState,"name")).attr("data-name",this.firstName+" "+this.lastName).append($("<td>").append($("<span>").css("background",i(this.party)).text(this.party))).append($("<td>").text(this.termState)).append($("<td>").append($("<a>").attr("href","/politicians/"+this.firstName.toLowerCase().replace(/\s+/g,"").replace(/"(.*?)"/ig,"")+"-"+this.lastName.toLowerCase().replace(/\s+/g,"").replace(/"(.*?)"/ig,"")+"/"+this._id).text(this.firstName+" "+this.lastName))))})}else{r.append($("<ul>"));$.each(e[n],function(e,t){if(this.party=="Democrat"||this.party=="D")this.party="D";else if(this.party=="Republican"||this.party=="R")this.party="R";else if(this.party=="Independent"||this.party=="I")this.party="I";this._id=this.bioguideId;r.find("ul").append($("<li>").attr("data-party",this.party).attr("data-partylong",s(this.party)).attr("data-state",this.termState).attr("data-statelong",b(this.termState,"name")).attr("data-name",this.firstName+" "+this.lastName).css("background-image","url(/assets/pictures/congress-113/"+this._id+".jpg)").append($("<a>").attr("href","/politicians/"+this.firstName.toLowerCase().replace(/\s+/g,"").replace(/"(.*?)"/ig,"")+"-"+this.lastName.toLowerCase().replace(/\s+/g,"").replace(/"(.*?)"/ig,"")+"/"+this._id).append($("<span>").css("background",i(this.party)))))})}else n=="yeas"?r.append($("<p>").attr("class","aligncenter").text("No members voted yea")):n=="nays"?r.append($("<p>").attr("class","aligncenter").text("No members voted nay")):n=="notVoting"?r.append($("<p>").attr("class","aligncenter").text("All members voted")):r.append($("<p>").attr("class","aligncenter").text("All members were present"));return r}function i(e){return e=="D"||e=="Democrat"?"#61D2D6":e=="R"||e=="Republican"?"#EA3556":"#888888"}function s(e){return e=="D"?"Democrat":e=="R"?"Republican":"Independent"}function o(e,t,n){m.find(".d3Tooltip").html("").append($("<h5>").text(e).append($("<p>").text(n+" - "+t)))}$(".poliViewColumn").remove();m.append($("<div>").attr("class","row").append($("<div>").attr("class","large-4 columns").append($("<div>").attr("class","poliViewColumn").append($("<div>").append($("<h5>").html(n("Yeas"))).append($("<p>").text(e.yeaTotal+" votes"))).append(r("yeas")))).append($("<div>").attr("class","large-4 columns").append($("<div>").attr("class","poliViewColumn").append($("<div>").append($("<h5>").html(n("Nays"))).append($("<p>").text(e.nayTotal+" votes"))).append(r("nays")))).append($("<div>").attr("class","large-4 columns").append($("<div>").attr("class","poliViewColumn").append($("<div>").append($("<h5>").text("Didn't Vote")).append($("<p>").text(e.notVotingTotal+" members"))).append(r("notVoting"))).append($("<div>").attr("class","poliViewColumn").append($("<div>").append($("<h5>").text("Absent")).append($("<p>").text(e.presentTotal+" members"))).append(r("present")))));m.find("table").stupidtable().find("th:eq(1)").trigger("click");$(document).on("keyup",'input[name="filterPoliticians"]',function(){y($(this).val())}).on("keypress",'input[name="filterPoliticians"]',function(e){e.which==13&&e.preventDefault()});m.find(".poliViewColumn li").on("mouseover",function(){m.find(".d3Tooltip").show()}).on("mouseout",function(){m.find(".d3Tooltip").hide()}).on("mousemove",throttle(function(e){var t=e.pageX-m.offset().left,n=e.pageY-m.offset().top;m.find(".d3Tooltip").css("left",t+10).css("top",n+10)},10)).on("mouseenter",function(){o($(this).attr("data-name"),$(this).attr("data-statelong"),$(this).attr("data-party"))});m.fadeIn(500)}function y(e){e=e.toLowerCase();$(".poliViewColumn tbody tr, .poliViewColumn li").each(function(){$(this).attr("data-partylong").toLowerCase().indexOf(e)==-1&&$(this).attr("data-state").toLowerCase().indexOf(e)==-1&&$(this).attr("data-statelong").toLowerCase().indexOf(e)==-1&&$(this).attr("data-name").toLowerCase().indexOf(e)==-1?$(this).addClass("hide"):$(this).removeClass("hide")});$(".poliViewColumn tbody, .poliViewColumn ul").each(function(){var e=$(this).children().not(".hide").length,t=$(this).parents(".poliViewColumn").find("div:first-of-type p"),n=t.text().substr(t.text().indexOf(" "));t.text(e+n)})}function b(e,t){var n=new Array({name:"Alabama",abbrev:"AL"},{name:"Alaska",abbrev:"AK"},{name:"Arizona",abbrev:"AZ"},{name:"Arkansas",abbrev:"AR"},{name:"California",abbrev:"CA"},{name:"Colorado",abbrev:"CO"},{name:"Connecticut",abbrev:"CT"},{name:"Delaware",abbrev:"DE"},{name:"Florida",abbrev:"FL"},{name:"Georgia",abbrev:"GA"},{name:"Hawaii",abbrev:"HI"},{name:"Idaho",abbrev:"ID"},{name:"Illinois",abbrev:"IL"},{name:"Indiana",abbrev:"IN"},{name:"Iowa",abbrev:"IA"},{name:"Kansas",abbrev:"KS"},{name:"Kentucky",abbrev:"KY"},{name:"Louisiana",abbrev:"LA"},{name:"Maine",abbrev:"ME"},{name:"Maryland",abbrev:"MD"},{name:"Massachusetts",abbrev:"MA"},{name:"Michigan",abbrev:"MI"},{name:"Minnesota",abbrev:"MN"},{name:"Mississippi",abbrev:"MS"},{name:"Missouri",abbrev:"MO"},{name:"Montana",abbrev:"MT"},{name:"Nebraska",abbrev:"NE"},{name:"Nevada",abbrev:"NV"},{name:"New Hampshire",abbrev:"NH"},{name:"New Jersey",abbrev:"NJ"},{name:"New Mexico",abbrev:"NM"},{name:"New York",abbrev:"NY"},{name:"North Carolina",abbrev:"NC"},{name:"North Dakota",abbrev:"ND"},{name:"Ohio",abbrev:"OH"},{name:"Oklahoma",abbrev:"OK"},{name:"Oregon",abbrev:"OR"},{name:"Pennsylvania",abbrev:"PA"},{name:"Rhode Island",abbrev:"RI"},{name:"South Carolina",abbrev:"SC"},{name:"South Dakota",abbrev:"SD"},{name:"Tennessee",abbrev:"TN"},{name:"Texas",abbrev:"TX"},{name:"Utah",abbrev:"UT"},{name:"Vermont",abbrev:"VT"},{name:"Virginia",abbrev:"VA"},{name:"Washington",abbrev:"WA"},{name:"West Virginia",abbrev:"WV"},{name:"Wisconsin",abbrev:"WI"},{name:"Wyoming",abbrev:"WY"}),r="";$.each(n,function(n,i){if(e=="each")t=="name"?r+=","+i.name:t=="abbrev"&&(r+=","+i.abbrev.toUpperCase());else if(t=="name"){if(i.abbrev.toLowerCase()==e.toLowerCase()){r=i.name;return!1}}else if(t=="abbrev"&&i.name.toLowerCase()==e.toLowerCase()){r=i.abbrev.toUpperCase();return!1}});e=="each"&&(r=r.slice(1));return r}var e={total:{name:"total",children:[{name:"yeas",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]},{name:"nays",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]}]},AL:{name:"AL",children:[{name:"yeas",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]},{name:"nays",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]}]},AK:{name:"AK",children:[{name:"yeas",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]},{name:"nays",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]}]},AZ:{name:"AZ",children:[{name:"yeas",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]},{name:"nays",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]}]},AR:{name:"AR",children:[{name:"yeas",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]},{name:"nays",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]}]},CA:{name:"CA",children:[{name:"yeas",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]},{name:"nays",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]}]},CO:{name:"CO",children:[{name:"yeas",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]},{name:"nays",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]}]},CT:{name:"CT",children:[{name:"yeas",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]},{name:"nays",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]}]},DE:{name:"DE",children:[{name:"yeas",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]},{name:"nays",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]}]},FL:{name:"FL",children:[{name:"yeas",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]},{name:"nays",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]}]},GA:{name:"GA",children:[{name:"yeas",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]},{name:"nays",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]}]},HI:{name:"HI",children:[{name:"yeas",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]},{name:"nays",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]}]},ID:{name:"ID",children:[{name:"yeas",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]},{name:"nays",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]}]},IL:{name:"IL",children:[{name:"yeas",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]},{name:"nays",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]}]},IN:{name:"IN",children:[{name:"yeas",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]},{name:"nays",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]}]},IA:{name:"IA",children:[{name:"yeas",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]},{name:"nays",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]}]},KS:{name:"KS",children:[{name:"yeas",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]},{name:"nays",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]}]},KY:{name:"KY",children:[{name:"yeas",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]},{name:"nays",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]}]},LA:{name:"LA",children:[{name:"yeas",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]},{name:"nays",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]}]},ME:{name:"ME",children:[{name:"yeas",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]},{name:"nays",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]}]},MD:{name:"MD",children:[{name:"yeas",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]},{name:"nays",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]}]},MA:{name:"MA",children:[{name:"yeas",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]},{name:"nays",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]}]},MI:{name:"MI",children:[{name:"yeas",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]},{name:"nays",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]}]},MN:{name:"MN",children:[{name:"yeas",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]},{name:"nays",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]}]},MS:{name:"MS",children:[{name:"yeas",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]},{name:"nays",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]}]},MO:{name:"MO",children:[{name:"yeas",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]},{name:"nays",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]}]},MT:{name:"MT",children:[{name:"yeas",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]},{name:"nays",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]}]},NE:{name:"NE",children:[{name:"yeas",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]},{name:"nays",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]}]},NV:{name:"NV",children:[{name:"yeas",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]},{name:"nays",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]}]},NH:{name:"NH",children:[{name:"yeas",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]},{name:"nays",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]}]},NJ:{name:"NJ",children:[{name:"yeas",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]},{name:"nays",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]}]},NM:{name:"NM",children:[{name:"yeas",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]},{name:"nays",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]}]},NY:{name:"NY",children:[{name:"yeas",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]},{name:"nays",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]}]},NC:{name:"NC",children:[{name:"yeas",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]},{name:"nays",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]}]},ND:{name:"ND",children:[{name:"yeas",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]},{name:"nays",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]}]},OH:{name:"OH",children:[{name:"yeas",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]},{name:"nays",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]}]},OK:{name:"OK",children:[{name:"yeas",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]},{name:"nays",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]}]},OR:{name:"OR",children:[{name:"yeas",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]},{name:"nays",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]}]},PA:{name:"PA",children:[{name:"yeas",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]},{name:"nays",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]}]},RI:{name:"RI",children:[{name:"yeas",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]},{name:"nays",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]}]},SC:{name:"SC",children:[{name:"yeas",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]},{name:"nays",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]}]},SD:{name:"SD",children:[{name:"yeas",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]},{name:"nays",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]}]},TN:{name:"TN",children:[{name:"yeas",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]},{name:"nays",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]}]},TX:{name:"TX",children:[{name:"yeas",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]},{name:"nays",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]}]},UT:{name:"UT",children:[{name:"yeas",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]},{name:"nays",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]}]},VT:{name:"VT",children:[{name:"yeas",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]},{name:"nays",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]}]},VA:{name:"VA",children:[{name:"yeas",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]},{name:"nays",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]}]},WA:{name:"WA",children:[{name:"yeas",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]},{name:"nays",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]}]},WV:{name:"WV",children:[{name:"yeas",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]},{name:"nays",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]}]},WI:{name:"WI",children:[{name:"yeas",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]},{name:"nays",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]}]},WY:{name:"WY",children:[{name:"yeas",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]},{name:"nays",children:[{name:"D",size:0},{name:"R",size:0},{name:"I",size:0}]}]}},t={},n={},r=$("#billID").html();$.get("/bills/"+r,{format:"json"},function(r){$("#billID").remove();console.log(r);var i=trimByWord(r.summary);$(".entityInfo h1").text(function(){return r.popularTitle!=null?r.popularTitle:r.shortTitle!=null?r.shortTitle:r.officialTitle}).next("p").text(i).attr("data-summary",r.summary).after(function(){if(i!=r.summary)return $("<p>").attr("class","alignright readMore").append($("<a>").attr("href","#").text("Read more »"))});$.each(r.votes.yeas,function(t,n){if(this.party=="D"||this.party=="Democrat"){e[this.termState].children[0].children[0].size++;e.total.children[0].children[0].size++}else if(this.party=="R"||this.party=="Republican"){e[this.termState].children[0].children[1].size++;e.total.children[0].children[1].size++}else{e[this.termState].children[0].children[2].size++;e.total.children[0].children[2].size++}});$.each(r.votes.nays,function(t,n){if(this.party=="D"||this.party=="Democrat"){e[this.termState].children[1].children[0].size++;e.total.children[1].children[0].size++}else if(this.party=="R"||this.party=="Republican"){e[this.termState].children[1].children[1].size++;e.total.children[1].children[1].size++}else{e[this.termState].children[1].children[2].size++;e.total.children[1].children[2].size++}});var u=r.billType.charAt(0);u=="s"||u=="S"?t.chamber="Senate":t.chamber="House";t.yeas={};t.nays={};$.each(r.votes.yeas,function(e,n){isNaN(t.yeas[this.termState])?t.yeas[this.termState]=1:t.yeas[this.termState]++});$.each(r.votes.nays,function(e,n){isNaN(t.nays[this.termState])?t.nays[this.termState]=1:t.nays[this.termState]++});t.yeasTotal=r.votes.yeaTotal;t.naysTotal=r.votes.nayTotal;n=r.votes;s.hide();p.hide();m.hide();o(e,"total",r.votes.notVotingTotal,r.votes.presentTotal);d(t);$(".poliViewType li:eq(1)").trigger("click")});$(document).on("click",".entityInfo .readMore a",function(e){e.preventDefault();var t=$(this).parents("p").prev(),n=t.text(),r=t.attr("data-summary");t.text(r).attr("data-summary",n);$(this).text()!="Less »"?$(this).text("Less »"):$(this).text("Read more »");scrollToPos(0,!0)});$("#graphs").append($("<div>").attr("class","large-4 small-10 large-uncentered small-centered columns graph").attr("id","voteBD").append($("<h4>").attr("class","h4Pad").text("Vote Breakdown")).append($("<div>").attr("class","sharable").append($("<span>").attr("aria-hidden",!0).attr("class","icon-earth")).append($("<span>").text("Share"))));var i={};i.width=300;i.height=300;i.radius=Math.min(i.width,i.height)/2;i.color=d3.scale.ordinal().range(["#C4D117","#DDDDDD","#61D2D6","#EA3556","#888888"]).domain(d3.range(0,5));i.svg=d3.select("#voteBD").append("svg").attr("width","100%").attr("height","100%").attr("viewBox","0 0 "+Math.min(i.width,i.height)+" "+Math.min(i.width,i.height)).attr("preserveAspectRatio","xMinYMin").append("g").attr("transform","translate("+i.width/2+","+i.height/2+") rotate(90)");i.partition=d3.layout.partition().sort(null).size([2*Math.PI,i.radius*i.radius]).value(function(e){return e.size});i.arc=d3.svg.arc().startAngle(function(e){return e.x}).endAngle(function(e){return e.x+e.dx}).innerRadius(function(e){return e.depth!=2?Math.sqrt(e.y):Math.sqrt(e.y)+22}).outerRadius(function(e){return e.depth!=2?Math.sqrt(e.y+e.dy)+22:Math.sqrt(e.y+e.dy)});i.arc2=d3.svg.arc().startAngle(function(e){return e.x}).endAngle(function(e){return e.x+e.dx}).innerRadius(function(e){return Math.sqrt(e.y)}).outerRadius(function(e){return Math.sqrt(e.y+e.dy)});var s=$("#voteBD");$("#graphs").append($("<div>").attr("class","hide-for-small").append($("<div>").attr("class","large-6 large-offset-2 columns graph").attr("id","geoBD").append($("<h4>").attr("class","h4Pad").text("Geographic Breakdown")).append($("<div>").attr("class","sharable").append($("<span>").attr("aria-hidden",!0).attr("class","icon-earth")).append($("<span>").text("Share"))))).append($("<div>").attr("class","show-for-small").append($("<h4>").attr("class","small-12 columns h4Pad").text("Geographic Breakdown")).append($("<form>").attr("class","small-12 columns custom").append($("<select>").attr("class","large expand").attr("id","stateSelector").append($("<option>").attr("selected","selected").text("All states")).append(c()))));$(document).on("change","#stateSelector",function(){var e=$(this).val();if(e=="All states"){$('input[name="filterPoliticians"]').val("");y("")}else{$('input[name="filterPoliticians"]').val(e);y(e)}});var h={};h.width=500;h.height=500;h.centered="";h.colorSenate=d3.scale.ordinal().range(["#C4D117","#DDDDDD","#CFD671"]).domain(d3.range(0,3));h.colorHouse=d3.scale.ordinal().range(["#C4D117","#CAD449","#D1D77A","#D7DAAC","#DDDDDD"]).domain(d3.range(0,5));h.svg=d3.select("#geoBD").append("svg").attr("width","100%").attr("height","100%").attr("viewBox","0 0 "+Math.min(h.width,h.height)+" "+Math.min(h.width,h.height)).attr("preserveAspectRatio","xMinYMin");h.projection=d3.geo.albersUsa().scale(900).translate([h.width/2,h.height/2]);h.path=d3.geo.path().projection(h.projection);h.g=h.svg.append("g").attr("transform","translate(100,0)");var p=$("#geoBD");$("#graphs").append($("<div>").attr("class","large-12 columns graph").attr("id","poliView").append($("<h4>").text("Politician Viewer")));var m=$("#poliView");m.append($("<div>").attr("class","row collapse").append($("<form>").attr("class","large-10 small-9 columns").append($("<input>").attr("name","filterPoliticians").attr("type","text").attr("placeholder","Filter by party, politician, or state"))).append($("<div>").attr("class","large-2 small-3 columns").append($("<ul>").attr("class","poliViewType").append($("<li>").append($("<span>").text("View:"))).append($("<li>").attr("data-type","list").append($("<span>").attr("aria-hidden","true").attr("class","icon-list"))).append($("<li>").attr("data-type","heat").append($("<span>").attr("aria-hidden","true").attr("class","icon-user"))))));$(document).on("click",".poliViewType li",function(){if($(this).index()!=0){$(".poliViewType li").each(function(){$(this).removeClass("current")});$(this).addClass("current");g(n,$(this).attr("data-type"));y($('input[name="filterPoliticians"]').val())}});m.find(".row.collapse").before($("<div>").attr("class","d3Tooltip smallCentered"
));$(window).on("resize",function(){f();l();v()})})();